sudo: true
language: node_js
node_js:
  - "lts/*"
  - "6"
services:
  - docker
before_install:
  - docker pull docker pull docker.elastic.co/elasticsearch/elasticsearch:5.5.3
  - sudo sysctl -w vm.max_map_count=262144
  - docker run -d -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" docker.elastic.co/elasticsearch/elasticsearch:5.5.3
  - sleep 10
script:
  - npm run report
after_script:
  - "npm install coveralls@2.10.0 && cat ./coverage/lcov.info | ./node_modules/.bin/coveralls"